<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://unpkg.com; connect-src 'self'; img-src 'self' data:; manifest-src 'self';">
    <title>inkdrop</title>


    <meta name="description" content="Minimalist note-taking app with dark theme">
    <meta name="keywords" content="notes, note-taking, minimalist, dark theme, productivity, PWA, offline">
    <meta name="author" content="mosaddiq">
    <meta name="theme-color" content="#0f0f0f">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="inkdrop">
    <meta name="msapplication-TileColor" content="#0f0f0f">
    <meta name="msapplication-config" content="browserconfig.xml">


    <link rel="icon" type="image/svg+xml" href="assets/icons/favicon.svg">
    <link rel="apple-touch-icon" href="assets/icons/icon-192.svg">
    <link rel="mask-icon" href="assets/icons/favicon.svg" color="#0f0f0f">


    <link rel="manifest" href="app.manifest.json">


    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Geist:wght@300;400;500&display=swap" rel="stylesheet">


    <link rel="stylesheet" href="src/app.css">
</head>

<body>
    <div class="app">

        <div id="list" class="view active">
            <header>
                <div class="logo" aria-label="inkdrop logo">
                    <svg class="logo-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2" aria-hidden="true">
                        <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z" />
                    </svg>
                    <h1>inkdrop</h1>
                </div>
                <div class="header-actions">
                    <button id="select-mode-btn" class="btn-ghost" title="Select notes">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="9,11 12,14 22,4" />
                            <path d="M21,12v7a2,2 0 0,1 -2,2H5a2,2 0 0,1 -2,-2V5a2,2 0 0,1 2,-2h11" />
                        </svg>
                    </button>
                    <button id="settings-btn" class="btn-ghost" title="Settings & Export">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="lucide lucide-settings-icon lucide-settings">
                            <path
                                d="M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915" />
                            <circle cx="12" cy="12" r="3" />
                        </svg>
                    </button>
                    <button id="new" title="New note (Ctrl+N)">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M12 5v14M5 12h14" />
                        </svg>
                    </button>
                </div>
            </header>

            <div class="search-box">
                <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="2">
                    <circle cx="11" cy="11" r="8" />
                    <path d="m21 21-4.35-4.35" />
                </svg>
                <input id="search" type="text" placeholder="search notes..." autocomplete="off">
                <button id="clear" class="clear" style="display:none">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12" />
                    </svg>
                </button>
            </div>


            <div id="bulk-bar" class="bulk-bar" style="display: none;">
                <div class="bulk-info">
                    <span id="selected-count">0 selected</span>
                    <button id="select-all-btn" class="bulk-action-btn" title="Select All">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="9,11 12,14 22,4" />
                            <path d="M21,12v7a2,2 0 0,1 -2,2H5a2,2 0 0,1 -2,-2V5a2,2 0 0,1 2,-2h11" />
                        </svg>
                        <span>Select All</span>
                    </button>
                    <button id="deselect-all-btn" class="bulk-action-btn" title="Deselect All">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                        </svg>
                        <span>Deselect All</span>
                    </button>
                </div>
                <div class="bulk-actions">
                    <button id="bulk-export-btn" class="bulk-action-btn" title="Export selected notes">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                            <polyline points="7,10 12,15 17,10" />
                            <line x1="12" y1="15" x2="12" y2="3" />
                        </svg>
                        <span>Export</span>
                    </button>
                    <button id="bulk-delete-btn" class="bulk-action-btn delete" title="Delete selected notes">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="3,6 5,6 21,6" />
                            <path
                                d="m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2" />
                        </svg>
                        <span>Delete</span>
                    </button>
                    <button id="exit-select-btn" class="bulk-action-btn" title="Exit selection mode">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M18 6L6 18M6 6l12 12" />
                        </svg>
                    </button>
                </div>
            </div>

            <div id="notes" class="notes">
                <div class="empty">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                        <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z" />
                        <polyline points="14,2 14,8 20,8" />
                        <line x1="16" y1="13" x2="8" y2="13" />
                        <line x1="16" y1="17" x2="8" y2="17" />
                    </svg>
                    <p>no notes yet</p>
                    <span>press + to create your first note</span>
                </div>
            </div>
        </div>


        <div id="editor" class="view">
            <header>
                <button id="back" title="Back to notes (Esc)">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7" />
                    </svg>
                </button>
                <div class="actions">
                    <div id="online-status" class="online-status"></div>
                    <div id="status" class="status"></div>
                    <button id="export-note-btn" class="btn" title="Export this note as text">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                            <polyline points="14,2 14,8 20,8" />
                            <line x1="16" y1="13" x2="8" y2="13" />
                            <line x1="16" y1="17" x2="8" y2="17" />
                        </svg>
                    </button>
                    <button id="delete" class="delete" title="Delete note">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="3,6 5,6 21,6" />
                            <path
                                d="m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2" />
                        </svg>
                    </button>
                </div>
            </header>

            <div class="edit">
                <input id="title" type="text" placeholder="untitled" autocomplete="off" spellcheck="false">
                <textarea id="content" placeholder="start writing..." spellcheck="true"></textarea>
            </div>

            <footer>
                <span id="date"></span>
                <span id="count">0 characters</span>
            </footer>
        </div>
    </div>


    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>delete note</h3>
            </div>
            <div class="modal-body">
                <p id="modal-text">Are you sure you want to delete this note?</p>
                <div class="note-preview-modal">
                    <div id="modal-title" class="modal-note-title"></div>
                    <div id="modal-preview" class="modal-note-preview"></div>
                </div>
            </div>
            <div class="modal-actions">
                <button id="modal-cancel" class="modal-btn cancel">cancel</button>
                <button id="modal-delete" class="modal-btn delete-confirm">delete</button>
            </div>
        </div>
    </div>

    <div id="bulk-delete-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>delete selected notes</h3>
            </div>
            <div class="modal-body">
                <p id="bulk-delete-text">Are you sure you want to delete the selected notes?</p>
                <div class="bulk-count-display">
                    <span id="bulk-delete-count">0 notes selected</span>
                </div>
            </div>
            <div class="modal-actions">
                <button id="bulk-modal-cancel" class="modal-btn cancel">cancel</button>
                <button id="bulk-modal-delete" class="modal-btn delete-confirm">delete</button>
            </div>
        </div>
    </div>


    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>settings & export</h3>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h4>Bulk Operations</h4>
                    <p class="settings-description">Use the select button (✓) in the header to choose specific notes for
                        export or deletion. This gives you full control over which notes to manage.</p>
                </div>
                <div class="settings-section">
                    <h4>Backup & Restore</h4>
                    <div class="export-options">
                        <button id="export-all-json" class="settings-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                                <polyline points="14,2 14,8 20,8" />
                            </svg>
                            <div>
                                <span>Full Backup (JSON)</span>
                                <small>Complete backup for importing back to inkdrop</small>
                            </div>
                        </button>
                        <button id="import-data" class="settings-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                                <polyline points="17,10 12,5 7,10" />
                                <line x1="12" y1="5" x2="12" y2="17" />
                            </svg>
                            <div>
                                <span>Restore from Backup</span>
                                <small>Import notes from JSON backup file</small>
                            </div>
                        </button>
                        <input type="file" id="import-file" accept=".json" style="display: none;" />
                    </div>
                </div>
                <div class="settings-section">
                    <h4>Keyboard Shortcuts</h4>
                    <div class="shortcuts-list">
                        <div class="shortcut-item">
                            <span class="shortcut-key">Ctrl+N</span>
                            <span class="shortcut-desc">New note</span>
                        </div>
                        <div class="shortcut-item">
                            <span class="shortcut-key">Ctrl+S</span>
                            <span class="shortcut-desc">Save note</span>
                        </div>
                        <div class="shortcut-item">
                            <span class="shortcut-key">Ctrl+F</span>
                            <span class="shortcut-desc">Search notes</span>
                        </div>
                        <div class="shortcut-item">
                            <span class="shortcut-key">Ctrl+A</span>
                            <span class="shortcut-desc">Select all notes</span>
                        </div>
                        <div class="shortcut-item">
                            <span class="shortcut-key">Esc</span>
                            <span class="shortcut-desc">Back to notes list</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button id="settings-close" class="modal-btn cancel">close</button>
            </div>
        </div>
    </div>



    <script src="src/app.js"></script>


    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        if (window.location.hostname === 'localhost') {
                            console.log('SW registered: ', registration);
                        }
                    })
                    .catch((registrationError) => {
                        if (window.location.hostname === 'localhost') {
                            console.log('SW registration failed: ', registrationError);
                        }
                    });
            });
        }
    </script>
</body>

</html>
